id: redirect

source:
  plugin: url
  data_fetcher_plugin: http
  data_parser_plugin: json

  urls: https://deploy-preview-213--opdavies.netlify.app/redirects.json

  ids:
    id:
      type: integer

  item_selector: redirects/

  fields:
    - name: id
      selector: id
      label: Redirect ID

    - name: from
      selector: from
      label: From

    - name: to
      selector: to
      label: To

process:
  redirect_source/path: from
  redirect_redirect/uri:
    plugin: opd_redirect
    source: to

  language:
    plugin: default_value
    default_value: und

  status_code:
    plugin: default_value
    default_value: 301

  uid:
    plugin: default_value
    default_value: 1

destination:
  plugin: 'entity:redirect'

migration_dependencies:
  required: { }
