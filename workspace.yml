workspace('oliverdavies-uk'):
  description: My personal website codebase.

attribute('frontend'):
  build: npm run prod
  dev: npm run dev
  install: npm ci
  path: themes/custom/opdavies
  watch: npm run watch

command('composer %'):
  env:
    COMPOSE_PROJECT_NAME: = @('namespace')
  exec: |
    #!bash|=
    ws exec composer ={ input.argument('%') }

command('disable'):
  env:
    COMPOSE_PROJECT_NAME: = @('namespace')
  exec: |
    #!bash
    run docker-compose down --remove-orphans

command('drush %'):
  env:
    COMPOSE_PROJECT_NAME: = @('namespace')
  exec: |
    #!bash|=
    ws exec bin/drush ={ input.argument('%') }

command('enable'):
  env:
    COMPOSE_PROJECT_NAME: = @('namespace')
  exec: |
    #!bash
    run docker-compose up -d --build

command('exec %'):
  env:
    COMPOSE_PROJECT_NAME: = @('namespace')
  exec: |
    #!bash|=
    passthru docker-compose exec php ={ input.argument('%') }

command('frontend dev'):
  env:
    COMPOSE_PROJECT_NAME: = @('namespace')
  exec: |
    #!bash|@
    passthru docker-compose run --rm -w /node/@('frontend.path') node @('frontend.dev')

command('frontend build'):
  env:
    COMPOSE_PROJECT_NAME: = @('namespace')
  exec: |
    #!bash|@
    passthru docker-compose run --rm -w /node/@('frontend.path') node @('frontend.build')

command('frontend install'):
  env:
    COMPOSE_PROJECT_NAME: = @('namespace')
  exec: |
    #!bash|@
    passthru docker-compose run --rm -w /node/@('frontend.path') node @('frontend.install')

command('frontend watch'):
  env:
    COMPOSE_PROJECT_NAME: = @('namespace')
  exec: |
    #!bash|@
    passthru docker-compose run --rm -w /node/@('frontend.path') node @('frontend.watch')

command('phpunit %'):
  env:
    COMPOSE_PROJECT_NAME: = @('namespace')
  exec: |
    #!bash|=
    ws exec bin/phpunit ={ input.argument('%') }
